#!/usr/bin/env python
import sys
import os
from sstools.commands.filter_bam import FilterBam
from sstools.commands.mark_haplotype import MarkHaplotype
from sstools.commands.mark_duplicate import MarkDuplicate
from sstools.commands.mark_region import MarkRegion

usage = """
Tools for Strand-seq analysis.

Usage: %s <command> [options]

Commands:
    -- Quality control
       FilterBam        Filter bam file for Strand-seq.
       MarkDuplicate    Mark duplicates for Strand-seq.
       MarkRegion       Mark regions, such as whitelist or blacklist.
       MarkHaplotype    Mark the parental for each read according to provided HET SNVs.
       
       StatGenomicCov   Statistic genomic coverage.
       
       MarkWhitelist    Mark the reads that overlap with whitelist regions.
       MarkBlacklist    Mark the reads that overlap with blacklist regions.
       
       
       
    -- Assembly
       ClusterCells
       SplitHaplotype
       MakeBaseMatrix
       MergeBaseMatrix
       

""" % os.path.basename(__file__)

def main():
    if len(sys.argv) == 1:
        print("Error: please provide command.")
        print(usage)
        exit(1)
        
    command = sys.argv[1]
    if command == "FilterBam":
        FilterBam()
    elif command == "MarkHaplotype":
        MarkHaplotype()
    elif command == "MarkDuplicate":
        MarkDuplicate()
    elif command == "MarkRegion":
        MarkRegion()
    else:
        print("Error: unknown command %s." % command)
        print(usage)
        exit(1)


if __name__ == '__main__':
    main()
    
